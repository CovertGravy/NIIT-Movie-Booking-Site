{"version":3,"sources":["app/bookingpage/bookingpage.controller.js"],"names":["BookingpageComponent","$http","select","userdata","movie","state","city","location","date","time","tickets","seats","cinemas","names","states","cities","locations","dates","times","poster","reserved","get","then","response","data","forEach","indexOf","element","title","push","console","log","sessionStorage","a","JSON","parse","i","length","theaters","missing","prop","value","reserveSeats","datauser","ticketBooked","ticket","count","t","$","document","ready","hasClass","addClass","each","removeClass","id","off","on","toggleClass","splice","modal","alert","undefined","setItem","stringify","href","index","findIndex","item","angular","module","component","templateUrl","controller","controllerAs"],"mappings":"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","file":"bookingpage.controller.js","sourcesContent":["'use strict';\n\n(function () {\n\n  class BookingpageComponent {\n    constructor($http) {\n      this.$http = $http;\n      this.select;\n      this.userdata = {\n        movie: '',\n        state: '',\n        city: '',\n        location: '',\n        date: '',\n        time: '',\n        tickets: '',\n        seats: []\n      };\n      this.cinemas;\n      this.names;\n      this.states;\n      this.cities;\n      this.locations;\n      this.dates;\n      this.times;\n      this.poster;\n      this.tickets = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n      this.seats = [];\n      this.reserved;\n    }\n\n\n    $onInit() {\n\n      // api call for list of movies in cinemas\n      this.$http.get('/api/cinemas').then((response) => {\n        this.cinemas = response.data;\n\n        let names = [];\n        this.cinemas.forEach(element => {\n          if (names.indexOf(element.movie.title) === -1) {\n            names.push(element.movie.title);\n          }\n        });\n        this.names = names;\n        console.log(this.cinemas);\n        console.log(this.names);\n      });\n\n      this.$http.get('/api/tickets').then(response => {\n        this.reserved = response.data;\n        console.log(this.reserved);\n      });\n\n      if (sessionStorage.movie) {\n        let a = JSON.parse(sessionStorage.movie);\n        this.select = a;\n        this.userdata.movie = a.movie.title;\n        console.log(this.userdata);\n        this.poster = a.movie.poster;\n        console.log(this.select);\n      }\n      // let select = this.seats;\n      // $(document).ready(function(){\n      //   if($('td').hasClass('seat')){\n      //     $('.seat').addClass('available');\n      //     $('.reserved').removeClass('available');      \n      //   }\n\n\n\n      //   if($('td').hasClass('available')){\n      //     $('.available').on('click', function(){\n      //       if(select.indexOf(this.id) === -1){\n      //         select.push(this.id);\n      //       }else{\n      //         select.splice(select.indexOf(this.id), 1);\n      //       }\n      //       console.log(select);\n      //       $(this).toggleClass('selected available'); \n      //     });\n      //   }\n\n      // });\n\n    }\n\n\n    getPoster() {\n      let poster = '';\n      for (let i = 0; i < this.cinemas.length; i++) {\n        if (this.userdata.movie === this.cinemas[i].movie.title) {\n          poster = this.cinemas[i].movie.poster;\n          break;\n        }\n      }\n\n      this.poster = poster;\n    }\n\n    getState() {\n      let states = [];\n      let cities = {};\n      let locations = {};\n      let dates = {};\n      let times = {};\n      let poster = '';\n\n      for (let i = 0; i < this.cinemas.length; i++) {\n        if (this.cinemas[i].movie.title === this.userdata.movie) {\n\n          if (poster === '') {\n            poster = this.cinemas[i].movie.poster;\n          }\n\n          if (states.indexOf(this.cinemas[i].movie.theaters.state) === -1) {\n            states.push(this.cinemas[i].movie.theaters.state);\n          }\n\n          if (cities[this.cinemas[i].movie.theaters.state]) {\n            if (cities[this.cinemas[i].movie.theaters.state].indexOf(this.cinemas[i].movie.theaters.city) === -1) {\n              cities[this.cinemas[i].movie.theaters.state].push(this.cinemas[i].movie.theaters.city);\n            }\n          } else {\n            cities[this.cinemas[i].movie.theaters.state] = [this.cinemas[i].movie.theaters.city];\n          }\n\n          if (locations[this.cinemas[i].movie.theaters.city]) {\n            if (locations[this.cinemas[i].movie.theaters.city].indexOf(this.cinemas[i].movie.theaters.location) === -1) {\n              locations[this.cinemas[i].movie.theaters.city].push(this.cinemas[i].movie.theaters.location);\n            }\n          } else {\n            locations[this.cinemas[i].movie.theaters.city] = [this.cinemas[i].movie.theaters.location];\n          }\n\n          if (dates[this.cinemas[i].movie.theaters.location]) {\n            dates[this.cinemas[i].movie.theaters.location].push(this.cinemas[i].movie.theaters.dates);\n          } else {\n            dates[this.cinemas[i].movie.theaters.location] = this.cinemas[i].movie.theaters.dates;\n          }\n\n          if (times[this.cinemas[i].movie.theaters.location]) {\n            times[this.cinemas[i].movie.theaters.location].push(this.cinemas[i].movie.theaters.time);\n          } else {\n            times[this.cinemas[i].movie.theaters.location] = this.cinemas[i].movie.theaters.time;\n          }\n        }\n      }\n\n      // this.cinemas.forEach(element => {\n      //   if(element.movie.title === this.userdata.movie){\n      //     states.push(element.movie.theaters.state);\n      //   }\n      // });\n      this.states = states;\n      this.cities = cities;\n      this.locations = locations;\n      this.dates = dates;\n      this.times = times;\n      this.poster = poster;\n      console.log(this.states);\n      console.log(this.cities);\n      console.log(this.locations);\n      console.log(this.dates);\n      console.log(this.times);\n      console.log(this.poster);\n      console.log(this.userdata);\n      console.log(this.seats);\n    }\n\n    proceed() {\n      let data = true;\n      let missing = [];\n      for (let prop in this.userdata) {\n        let value = this.userdata[prop];\n\n        if (value === '') {\n          data = false;\n          missing.push(prop);\n        } else {\n          console.log(value);\n        }\n\n      }\n\n      console.log(missing);\n      if(data) {\n\n        let reserveSeats = [];\n        let datauser = this.userdata;\n        let ticketBooked = this.reserved;\n        // for(let i=0; i<this.reserved.length; i++){\n        //   if(this.reserved[i].movie === this.userdata.movie){\n\n        //     }\n        //   }\n\n        ticketBooked.forEach(function (ticket) {\n          let count = 0;\n          for (let prop in datauser) {\n            if (prop !== 'tickets' && prop !== 'seats' && ticket[prop] === datauser[prop]) {\n              count++;\n            }\n          }\n          console.log(count);\n          if(count === 6){\n            ticket.seats.forEach(function(t){\n              reserveSeats.push(t);\n            });\n          }\n        });\n      \n        console.log(reserveSeats);\n\n        //-----------------------------------------------------------------\n\n\n        let select = this.seats;\n        $(document).ready(function() {\n\n          if ($('td').hasClass('seat')) {\n            $('.seat').addClass('available');\n            // $('.reserved').removeClass('available');\n          }\n\n          if($('td').hasClass('seat')){\n            $('.seat').each(function(){\n              if($(this).hasClass('reserved')){\n                $(this).removeClass('reserved'); \n                // $(this).removeClass('available');\n                $(this).removeClass('selected');               \n              }\n              if($(this).hasClass('selected')){\n                $(this).removeClass('selected');  \n              }\n              if(reserveSeats.indexOf(this.id) !== -1){\n                $(this).addClass('reserved');\n                if($(this).hasClass('available')){\n                  $(this).removeClass('available');\n                }   \n                if($(this).hasClass('selected')){\n                  $(this).removeClass('selected');\n                }\n              }\n            });\n          }\n\n          \n\n          let count=0;\n\n          // off() prevented multiple onclick event firing.\n          \n            $('.available').off().on('click', function () {\n              console.log(\"totla count\"+(count++));\n              if (select.indexOf(this.id) === -1) {\n                \n                \n                console.log(select.indexOf(this.id)); \n                select.push(this.id);\n                $(this).toggleClass('selected available');\n              } else {\n               // select.pop();\n               select.splice(select.indexOf(this.id), 1);\n               $(this).toggleClass('selected available');\n               \n              }\n              console.log(select);\n             \n            });\n          \n\n        });\n        $(\"#seatselect\").modal('show');\n\n\n//---------------------------------------------------------------------------\n       \n      }else {\n        alert(`Please select ${missing}`);\n      }\n\n\n    }\n  \n    \n  reset(){\n    this.seats.length=0;\n }\n  \n\n\n  getSeats(){\n    if (this.seats[0] !== undefined && this.seats.length == this.userdata.tickets) {\n      this.userdata.seats = this.seats;\n      sessionStorage.setItem('ticket', JSON.stringify(this.userdata));\n      $('#seatselect').modal('hide');\n      location.href = '/payment';\n    } else if (this.seats.length === 0) {\n      alert('Seat not selected!');\n    } else {\n      alert(`Please select ${this.userdata.tickets} seat(s).`);\n    }\n\n    console.log(this.userdata);\n  }\n\n  log() {\n    console.log(this.userdata);\n\n    let index = this.cinemas.findIndex(item => item.movie.title === this.userdata.movie);\n\n    // if(index !== -1){\n    //   this.select = this.cinemas[index];\n    // }\n\n    // let index;\n    // for(let i=0; i<this.cinemas.length; i++){\n    //   if(this.cinemas[i].movie.title === this.userdata.movie){\n    //     index = this.cinemas[i];\n    //     break;\n    //   }\n    // }\n\n\n    // this.select = index;\n\n    console.log(index);\n\n  }\n}\n  angular.module('yeomanAppApp')\n  .component('bookingpage', {\n    templateUrl: 'app/bookingpage/bookingpage.html',\n    controller: BookingpageComponent,\n    controllerAs: 'bookingpageCtrl'\n  });\n\n}) ();\n"]}