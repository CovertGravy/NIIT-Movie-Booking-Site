{"version":3,"sources":["app/bookingpage/bookingpage.controller.js"],"names":["BookingpageComponent","$http","select","userdata","cinemas","names","states","cities","locations","dates","times","poster","tickets","get","then","response","data","forEach","indexOf","element","movie","title","push","console","log","sessionStorage","a","JSON","parse","i","length","theaters","state","city","location","time","index","findIndex","item","angular","module","component","templateUrl","controller","controllerAs"],"mappings":"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","file":"bookingpage.controller.js","sourcesContent":["'use strict';\n\n(function () {\n\n  class BookingpageComponent {\n    constructor($http) {\n      this.$http = $http;\n      this.select;\n      this.userdata = {};\n      this.cinemas;\n      this.names;\n      this.states;\n      this.cities;\n      this.locations;\n      this.dates;\n      this.times;\n      this.poster;\n      this.tickets = [1,2,3,4,5,6,7,8,9,10];\n    }\n\n\n    $onInit() {\n\n      // api call for list of movies in cinemas\n      this.$http.get('/api/cinemas').then((response) => {\n        this.cinemas = response.data;\n\n        let names = [];\n        this.cinemas.forEach(element => {\n          if (names.indexOf(element.movie.title) === -1) {\n            names.push(element.movie.title);\n          }\n        });\n        this.names = names;\n        console.log(this.cinemas);\n        console.log(this.names);\n      });\n\n      if (sessionStorage.movie) {\n        let a = JSON.parse(sessionStorage.movie);\n        this.select = a;\n        this.userdata.movie = a.movie.title;\n        this.poster = a.movie.poster;\n        console.log(this.select);\n      }\n\n      \n\n    }\n\n    getPoster(){\n      let poster = '';\n      for(let i=0; i<this.cinemas.length; i++){\n        if(this.userdata.movie === this.cinemas[i].movie.title){\n          poster = this.cinemas[i].movie.poster;\n          break;\n        }\n      }\n\n      this.poster = poster;\n    }\n\n    getState() {\n      let states = [];\n      let cities = {};\n      let locations = {};\n      let dates = {};\n      let times = {};\n      let poster = '';\n\n      for (let i = 0; i < this.cinemas.length; i++) {\n        if (this.cinemas[i].movie.title === this.userdata.movie) {\n\n          if(poster === ''){\n            poster = this.cinemas[i].movie.poster;\n          }\n\n          if (states.indexOf(this.cinemas[i].movie.theaters.state) === -1) {\n            states.push(this.cinemas[i].movie.theaters.state);\n          }\n\n          if (cities[this.cinemas[i].movie.theaters.state]) {\n            if (cities[this.cinemas[i].movie.theaters.state].indexOf(this.cinemas[i].movie.theaters.city) === -1) {\n              cities[this.cinemas[i].movie.theaters.state].push(this.cinemas[i].movie.theaters.city);\n            }\n          } else {\n            cities[this.cinemas[i].movie.theaters.state] = [this.cinemas[i].movie.theaters.city];\n          }\n\n          if (locations[this.cinemas[i].movie.theaters.city]) {\n            if (locations[this.cinemas[i].movie.theaters.city].indexOf(this.cinemas[i].movie.theaters.location) === -1) {\n              locations[this.cinemas[i].movie.theaters.city].push(this.cinemas[i].movie.theaters.location);\n            }\n          } else {\n            locations[this.cinemas[i].movie.theaters.city] = [this.cinemas[i].movie.theaters.location];\n          }\n\n          if (dates[this.cinemas[i].movie.theaters.location]) {\n            dates[this.cinemas[i].movie.theaters.location].push(this.cinemas[i].movie.theaters.dates);\n          } else {\n            dates[this.cinemas[i].movie.theaters.location] = this.cinemas[i].movie.theaters.dates;\n          }\n\n          if (times[this.cinemas[i].movie.theaters.location]) {\n            times[this.cinemas[i].movie.theaters.location].push(this.cinemas[i].movie.theaters.time);\n          } else {\n            times[this.cinemas[i].movie.theaters.location] = this.cinemas[i].movie.theaters.time;\n          }\n        }\n      }\n\n      // this.cinemas.forEach(element => {\n      //   if(element.movie.title === this.userdata.movie){\n      //     states.push(element.movie.theaters.state);\n      //   }\n      // });\n      this.states = states;\n      this.cities = cities;\n      this.locations = locations;\n      this.dates = dates;\n      this.times = times;\n      this.poster = poster;\n      console.log(this.states);\n      console.log(this.cities);\n      console.log(this.locations);\n      console.log(this.dates);\n      console.log(this.times);\n      console.log(this.poster);\n      console.log(this.userdata);\n    }\n\n    log() {\n      console.log(this.userdata);\n\n      let index = this.cinemas.findIndex(item => item.movie.title === this.userdata.movie);\n\n      // if(index !== -1){\n      //   this.select = this.cinemas[index];\n      // }\n\n      // let index;\n      // for(let i=0; i<this.cinemas.length; i++){\n      //   if(this.cinemas[i].movie.title === this.userdata.movie){\n      //     index = this.cinemas[i];\n      //     break;\n      //   }\n      // }\n\n\n      // this.select = index;\n\n      console.log(index);\n\n    }\n  }\n  angular.module('yeomanAppApp')\n    .component('bookingpage', {\n      templateUrl: 'app/bookingpage/bookingpage.html',\n      controller: BookingpageComponent,\n      controllerAs: 'bookingpageCtrl'\n    });\n\n})();\n"]}