{"version":3,"sources":["app/addmovie/addmovie.controller.js"],"names":["AddmovieComponent","$http","$scope","socket","MovieData","MovieList","console","log","showMovie","get","then","response","data","syncUpdates","a","MovieName","b","MovieYear","undefined","alert","MovieID","results","id","post","code","title","confirm","delete","angular","module","component","templateUrl","controller","controllerAs"],"mappings":"AAAA;;;;;;AAEA,CAAC,YAAU;AAAA,MAELA,iBAFK;AAGT,+BAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,MAA3B,EAAmC;AAAA;;AACjC,WAAKF,KAAL,GAAaA,KAAb;AACA,WAAKC,MAAL,GAAcA,MAAd;AACA,WAAKC,MAAL,GAAcA,MAAd;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACA;AAED;AACD;;AAZS;AAAA;AAAA,gCAcC;AACRC,gBAAQC,GAAR,CAAY,OAAZ;AACA,aAAKC,SAAL;;AAEA;AACA;AACA;AACA;AACA;AACD;AAvBQ;AAAA;AAAA,kCA0BE;AAAA;;AACTF,gBAAQC,GAAR,CAAY,YAAZ;AACA,aAAKN,KAAL,CAAWQ,GAAX,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,UAACC,QAAD,EAAc;AAC/C,gBAAKN,SAAL,GAAiBM,SAASC,IAA1B;AACAN,kBAAQC,GAAR,CAAY,MAAKF,SAAjB;AACA,gBAAKF,MAAL,CAAYU,WAAZ,CAAwB,OAAxB,EAAiC,MAAKR,SAAtC;AACD,SAJD;AAKD;AAjCQ;AAAA;AAAA,oCAoCI;AAAA;;AACX,YAAIS,IAAE,KAAKC,SAAX;AACA,YAAIC,IAAE,KAAKC,SAAX;AACAX,gBAAQC,GAAR,CAAY,mBAAiBO,CAA7B;AACA,YAAGA,KAAKI,SAAL,IAAgBJ,KAAK,EAAxB,EAA2B;AACzBK,gBAAM,uBAAN;AACD,SAFD,MAGI;AACJ,eAAKlB,KAAL,CAAWQ,GAAX,CAAe,8FAA6FK,CAA7F,GAAiG,QAAjG,GAA2GE,CAA1H,EAA6HN,IAA7H,CACE,oBAAY;AACX,gBAAIU,UAAUT,SAASC,IAAT,CAAcS,OAAd,CAAsB,CAAtB,EAAyBC,EAAvC;AACA,mBAAKrB,KAAL,CAAWQ,GAAX,CAAe,wCAAwCW,OAAxC,GAAkD,2CAAjE,EACAV,IADA,CAEA,oBAAW;AACFJ,sBAAQC,GAAR,CAAYI,SAASC,IAArB;AACA,qBAAKR,SAAL,GAAiBO,SAASC,IAA1B;AAEH,aANN;AAOW;AACX,WAXH;AAYC;AACF;;AAGD;;AA5DS;AAAA;AAAA,iCA8DC;AAAA;;AAER,aAAKX,KAAL,CAAWsB,IAAX,CAAgB,aAAhB,EAA+B,KAAKnB,SAApC,EACCM,IADD,CACM,UAACC,QAAD,EAAc;AAClBL,kBAAQC,GAAR,CAAYI,QAAZ;AACA,cAAGA,SAASC,IAAT,CAAcY,IAAd,IAAoB,KAAvB,EACA;AACEL,kBAAM,YAAU,OAAKf,SAAL,CAAeqB,KAAzB,GAA+B,2BAArC;AACD,WAHD,MAII;AACFN,kBAAM,YAAU,OAAKf,SAAL,CAAeqB,KAAzB,GAA+B,uBAArC;AACA,mBAAKrB,SAAL,GAAiB,EAAjB;AAED;AAEF,SAbD;AAeD;AA/EQ;AAAA;AAAA,kCAiFGkB,EAjFH,EAiFM;AACb,YAAGI,QAAQ,kDAAR,CAAH,EAA+D;AAC7D,eAAKzB,KAAL,CAAW0B,MAAX,CAAkB,iBAAeL,EAAjC,EAAqCZ,IAArC,CAA0C,UAACC,QAAD,EAAc;AACtDQ,kBAAM,6BAAN;AACD,WAFD;AAGD,SAJD,MAIK;AACHA,gBAAM,gBAAN;AACD;AACF;AAzFQ;;AAAA;AAAA;;AA8FXS,UAAQC,MAAR,CAAe,cAAf,EACGC,SADH,CACa,UADb,EACyB;AACrBC,iBAAa,4BADQ;AAErBC,gBAAYhC,iBAFS;AAGtBiC,kBAAc;AAHQ,GADzB;AASC,CAvGD","file":"addmovie.controller.js","sourcesContent":["'use strict';\n\n(function(){\n\nclass AddmovieComponent {\n  constructor($http, $scope, socket) {\n    this.$http = $http;\n    this.$scope = $scope;\n    this.socket = socket;\n    this.MovieData = {};\n    this.MovieList = [];\n    //this.showMovie();\n\n  }\n  //console.log(\"thisis \"+this.MovieList);\n\n  $onInit() {\n    console.log(\"hello\");\n    this.showMovie();\n    \n    // this.$http.get('/api/things')\n    //   .then(response => {\n    //     this.awesomeThings = response.data;\n    //     this.socket.syncUpdates('thing', this.awesomeThings);\n    //   });\n  }\n\n\n  showMovie(){\n    console.log('api called');\n    this.$http.get('/api/Movies').then((response) => {\n      this.MovieList = response.data;\n      console.log(this.MovieList);\n      this.socket.syncUpdates('Movie', this.MovieList);\n    });\n  }\n\n  \n  SearchMovie(){\n    var a=this.MovieName;\n    var b=this.MovieYear;\n    console.log(\"value of a is \"+a);\n    if(a == undefined||a == ''){\n      alert('Movie name required!!');\n    }\n    else{\n    this.$http.get('https://api.themoviedb.org/3/search/movie?api_key=536b243c9c6c280a37f5047a1612242f&query=' +a + '&year=' +b).then(\n      response => {\n       var MovieID = response.data.results[0].id;\n       this.$http.get('https://api.themoviedb.org/3/movie/' + MovieID + '?api_key=536b243c9c6c280a37f5047a1612242f').\n       then(\n       response=> {\n                console.log(response.data);            \n                this.MovieData = response.data;\n                \n            });\n                  //console.log(response.data.results[0]);\n      });\n    }\n  }\n\n \n  //showMovie();\n\n  addMovie(){\n    \n    this.$http.post('/api/Movies', this.MovieData)\n    .then((response) => {\n      console.log(response);  \n      if(response.data.code==11000)\n      {\n        alert('Movie ['+this.MovieData.title+'] is already in Database.');\n      }\n      else{\n        alert('Movie ['+this.MovieData.title+'] added successfully.');\n        this.MovieData = {};\n\n      }\n     \n    });\n   \n  }\n\n  deleteMovie(id){\n    if(confirm(\"Click OK to confirm deletion or Cancel to abort.\")){\n      this.$http.delete('/api/Movies/'+id).then((response) => {\n        alert('Movie Deleted Successfully!');\n      });\n    }else{\n      alert('Action aborted');\n    }\n  }\n\n  \n}\n\nangular.module('yeomanAppApp')\n  .component('addmovie', {\n    templateUrl: 'app/addmovie/addmovie.html',\n    controller: AddmovieComponent,\n   controllerAs: 'addmovieCtrl'\n  });\n\n  \n\n})();\n"]}