{"version":3,"sources":["app/moviemap/moviemap.controller.js"],"names":["MoviemapComponent","$http","socket","$scope","message","cinemas","movie","theater","city","dates","hour","min","timings","data","poster","backdrop","tagline","ratings","get","then","response","console","log","cities","i","length","indexOf","City","push","syncUpdates","date","Date","day","moment","add","format","j","h","l","hh","mm","m","ampm","tt","duplicate","alert","time","splice","id","confirm","delete","index","findIndex","item","Title","movieS","Poster","datemap","$","each","val","items","title","cityS","theaterS","times","valid","check","Object","values","check1","keys","Array","isArray","undefined","cinema","dateCheck","timeCheck","sameD","sameT","theaters","name","d1","t1","k","samet","samed","booked","post","checked","angular","module","component","templateUrl","controller","controllerAs"],"mappings":"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","file":"moviemap.controller.js","sourcesContent":["'use strict';\n\n\n\n(function () {\n\n  class MoviemapComponent {\n    constructor($http, socket, $scope) {\n      this.message = 'Hello';\n      this.$scope = $scope;\n      this.socket = socket;\n      this.cinemas = [];\n      this.movie = [];\n      this.theater = [];\n      this.city = [];\n      this.$http = $http;\n      this.dates = [];\n      this.hour = [];\n      this.min = [];\n      this.timings = [];\n      this.data = {};\n      this.poster;\n      this.backdrop;\n      this.tagline;\n      this.ratings;\n    }\n\n    $onInit() {\n\n      // $(\"img\").error(function(){\n      //     $(this).hide();\n      // });\n      //--------------------------------------------------------------------------------------------------\n\n      // $('#add_time').click(function(){\n      //   var hh = $('#hour').val();\n      //   var mm = $('#min').val();\n      //   var ampm = $('#ampm').val();\n      //   var tt = hh+':'+mm+' '+ampm;\n      //   console.log(tt);\n      //   var i;\n      //   for(i=0; i<ttAr.length; i++){\n      //     var duplicate = false;\n      //     if(tt == ttAr[i]){\n      //       duplicate = true;\n      //       console.log('duplicate found');\n      //     }\n      //   }\n      //   if(duplicate == true){\n      //     alert(tt+' already added');\n      //   }else{\n      //   // this.timings=tt;\n      //     ttAr.push(tt);\n      //    // show(ttAr);\n      //   //  $scope.aa;\n      //     //$scope.aa=tt;\n      //   }\n      //   console.log(this.timings);\n\n      // });\n\n\n\n      //$digest or $apply\n      //this.timings=ttAr;\n\n\n\n\n\n\n\n\n\n      //-----------------------------------------------------------------------------------------------------------\n      this.$http.get('/api/Movies').then((response) => {\n        this.movie = response.data;\n        console.log(this.movie);\n      });\n\n      this.$http.get('/api/theaters').then((response) => {\n        this.theater = response.data;\n        var cities = [];\n        for (var i = 0; i < this.theater.length; i++) {\n          if (cities.indexOf(this.theater[i].City) == -1) {\n            cities.push(this.theater[i].City);\n          }\n        }\n        console.log(this.theater);\n        console.log(cities);\n        this.city = cities;\n      });\n\n      this.$http.get('/api/cinemas').then((response) => {\n        this.cinemas = response.data;\n        console.log(this.cinemas);\n        this.socket.syncUpdates('cinema', this.cinemas);\n      });\n\n      var date = new Date();\n      var day = moment(date);\n      console.log(day);\n\n      var i;\n      for (i = 0; i < 6; i++) {\n        this.dates[i] = day.add(1, 'd').format('MMM DD');\n      }\n\n      console.log(this.dates);\n\n      var j;\n      var h = 1;\n      for (j = 0; j < 12; j++) {\n        this.hour[j] = h;\n        if (this.hour[j] < 10) {\n          this.hour[j] = '0' + h;\n        }\n        h++;\n      }\n\n      var l;\n      for (l = 0; l < 12; l++) {\n        this.min[l] = l * 5;\n        if (this.min[l] < 10) {\n          this.min[l] = '0' + l * 5;\n        }\n      }\n\n    }\n\n\n    savetime() {\n\n      var hh = this.data.h;\n      var mm = this.data.m;\n      var ampm = this.data.ampm;\n      var tt = hh + ':' + mm + ' ' + ampm;\n      console.log(tt);\n\n      var i;\n      for (i = 0; i < this.timings.length; i++) {\n        var duplicate = false;\n        if (tt == this.timings[i]) {\n          duplicate = true;\n          console.log('duplicate found');\n        }\n      }\n\n      if (duplicate == true) {\n        alert(tt + ' already added');\n      } else {\n        this.timings.push(tt);\n      }\n\n      console.log(this.data);\n      console.log(this.timings);\n    }\n\n    deletetime(time) {\n      var i = this.timings.indexOf(time);\n      console.log(time);\n      this.timings.splice(i, 1);\n      console.log(this.timings);\n    }\n\n    deleteCinema(id) {\n      if (confirm(\"Click OK to confirm deletion or Cancel to abort.\")) {\n        this.$http.delete('/api/cinemas/' + id).then((response) => {\n          alert('Cinema Deleted Successfully!');\n        });\n      } else {\n        alert('Action aborted');\n      }\n    }\n\n    getPoster() {\n\n      var index = this.movie.findIndex(item => item.Title === this.data.movieS);\n      console.log(index);\n      if (index !== -1) {\n        this.poster = this.movie[index].Poster;\n        this.backdrop = this.movie[index].backdrop;\n        this.tagline = this.movie[index].tagline;\n        this.ratings = this.movie[index].ratings;\n        console.log(this.poster);\n      }\n\n    }\n\n    submit() {\n      var datemap = [];\n      $('.days:checked').each(function () {\n        datemap.push($(this).val());\n      });\n      if (datemap.length == 0) {\n        alert('No date selected');\n      }\n      console.log(datemap);\n\n\n      var items = {\n        title: this.data.movieS,\n        backdrop: this.backdrop,\n        city: this.data.cityS,\n        theater: this.data.theaterS,\n        dates: datemap,\n        times: this.timings,\n        tagline: this.tagline,\n        ratings: this.ratings\n      };\n      var valid = true;\n      var check = Object.values(items);\n      var check1 = Object.keys(items);\n\n      for (var i = 0; i < check.length; i++) {\n\n        if (Array.isArray(check[i])) {\n          if (check[i].length == 0) {\n            valid = false;\n          }\n        } else {\n          if (check[i] == undefined) {\n            valid = false;\n          }\n        }\n      }\n      console.log(valid);\n\n\n      var cinema = this.cinemas;\n      var dateCheck = true;\n      var timeCheck = true;\n\n      var sameD = [];\n      var sameT = [];\n      for (var i = 0; i < cinema.length; i++) {\n\n        console.log(cinema[i].movie);\n        if (cinema[i].movie.theaters.city == items.city && cinema[i].movie.theaters.name == items.theater) {\n          var d1 = cinema[i].movie.theaters.dates;\n          var t1 = cinema[i].movie.theaters.time;\n          for (var j = 0; j < d1.length; j++) {\n            if (items.dates.indexOf(d1[j]) !== -1) {\n              console.log('same dates ' + d1[j]);\n              dateCheck = false;\n              sameD.push(d1[j]);\n            }\n          }\n\n          if (!dateCheck) {\n            for (var k = 0; k < t1.length; k++) {\n              if (items.times.indexOf(t1[k]) !== -1) {\n                console.log('same timings ' + t1[k]);\n                timeCheck = false;\n                sameT.push(t1[k]);\n              }\n            }\n          }\n\n          if (!dateCheck && timeCheck) {\n            dateCheck = true;\n          }\n        }\n\n      }\n\n      var samet = [];\n      for (var i = 0; i < sameT.length; i++) {\n        if (samet.indexOf(sameT[i]) == -1) {\n          samet.push(sameT[i]);\n        }\n      }\n\n      var samed = [];\n      for(let i = 0; i < sameD.length; i++) {\n        if(samed.indexOf(sameD[i]) == -1) {\n          samed.push(sameD[i]);\n        }\n      }\n\n      var booked = function () {\n        if (dateCheck && timeCheck) {\n          return true;\n        } else if (timeCheck) {\n          return true;\n        } else if (dateCheck) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n\n      if (valid && booked()) {\n        this.$http.post('/api/cinemas', {\n          movie: {\n            title: items.title,\n            poster: this.poster,\n            backdrop: items.backdrop,\n            tagline: items.tagline,\n            ratings: items.ratings,\n            // imdb: this.movie[index].imdb_id,\n            theaters: {\n              name: items.theater,\n              city: items.city,\n              dates: items.dates,\n              time: items.times\n            }\n\n          }\n        }).then((response) => {\n          alert('Success!');\n          this.data.movieS = '';\n          this.data.theaterS = '';\n          this.data.cityS = '';\n          this.poster = '';\n          $('.days:checked').each(function () {\n            this.checked = false;\n          });\n          datemap = [];\n          this.timings = [];\n        });\n      } else if (!dateCheck && !timeCheck) {\n        alert('Theater is booked for [' + samed + '] on time[' + samet + ']');\n      } else {\n        alert('Details Missing');\n      }\n    }\n\n    // datepicker(){\n    //   var clicked\n\n    //   console.log(this.clicked);\n\n    //   if(!this.clicked){\n    //     console.log('if started');\n    //     this.clicked = true;\n    //   }else{\n    //     console.log('else');\n    //     this.clicked = false;\n    //   }\n\n    // }\n\n    // $.noConflict();\n    // jQuery(document).ready(function($){\n    //     $(\"button\").click(function(){\n    //         $(\"p\").text(\"jQuery is still working!\");\n    //     });\n    // });\n\n  }\n\n  angular.module('yeomanAppApp')\n    .component('moviemap', {\n      templateUrl: 'app/moviemap/moviemap.html',\n      controller: MoviemapComponent,\n      controllerAs: 'moviemapCtrl'\n    });\n\n})();\n"]}